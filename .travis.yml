sudo: required
dist: trusty
language: python
python:
  - "2.7"
#  - "3.3"
#  - "3.4"
#  - "3.5"
#  - "nightly"
before_install:
  - chmod u+x ./tests/tests.sh
  - ./tests/tests.sh
install:
  - pip install -r tests/requirements.txt
script:
  - export TRAVIS_DOMAIN=$(grep -Eoi "hostname:[A-za-z0-9]+.ngrok.io" url.log| head -1 | cut -d ":" -f2)
  - export TRAVIS_SESSION=$(openssl rand -base64 32)
  - coverage run --source ./ --omit ./tests/server.py -m unittest tests
after_success:
  - coveralls
